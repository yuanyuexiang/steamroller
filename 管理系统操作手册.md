# Steamroller 实体店产品展示管理系统 - 操作手册

## 📋 目录
1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [核心功能模块](#核心功能模块)
4. [操作指南](#操作指南)
5. [数据分析](#数据分析)
6. [用户与权限管理](#用户与权限管理)
7. [常见问题](#常见问题)
8. [技术支持](#技术支持)

---

## 系统概述

### 🎯 平台简介
Steamroller 是一个专为实体店铺产品展示而设计的现代化管理系统，提供完整的店铺管理、客户分析、浏览行为统计等功能，帮助实体商户实现数字化转型。

### 💡 核心价值
- **店铺数字化管理**: 完整的店铺信息管理和运营监控
- **客户行为分析**: 深度的用户浏览和访问数据统计
- **智能数据洞察**: 实时排名系统和趋势分析
- **权限精准控制**: 基于角色的管理员权限体系
- **现代化体验**: 响应式设计和直观的操作界面

### 🏗️ 技术架构
- **前端**: Next.js 15.5.0 + React 18 + TypeScript
- **UI框架**: Ant Design 5.27.1 + 自定义主题
- **数据层**: GraphQL + Apollo Client
- **后端**: Directus (Headless CMS)
- **认证**: JWT Token + 管理员角色验证
- **图片优化**: WebP格式 + 动态尺寸调整

---

## 快速开始

### 🔐 系统登录
1. 访问管理系统地址：`http://localhost:3000/login`
2. 输入管理员账号和密码
3. 点击"登录"按钮进入系统

### 🏠 主界面导航
登录成功后，您将看到系统主界面，包含以下核心模块：

```
├── 🏪 数据总览 - 实时统计和热门排名
├── 👥 用户管理 - 系统用户和权限控制
├── 🏬 店铺管理 - 店铺信息和运营管理
├── � 终端管理 - 展示终端设备管理
├── � 客户管理 - 客户信息和行为分析
├── � 订单管理 - 订单处理和跟踪
├── 👁️  浏览分析 - 产品浏览行为统计
├── 📊 访问统计 - 店铺访问数据分析
└── 👤 个人资料 - 账户设置和管理
```

### 🔐 管理员权限系统
- **严格的角色验证**: 只有管理员角色用户才能访问系统
- **支持的管理员角色**: Administrator、Admin、Super Admin、管理员等
- **自动权限检查**: 登录时和会话期间持续验证用户权限
- **安全登出**: 非管理员用户自动清除认证信息

---

## 核心功能模块

### 🏪 1. 数据总览 (Dashboard)
**功能概述**: 提供平台关键指标的实时概览和智能排名分析

**主要特性**:
- 📊 **核心数据统计**: 
  - 总订单数、店铺总数、终端数量
  - 客户总数、产品浏览量、店铺访问量
  - 今日新增数据和实时趋势

- 🏆 **智能排名系统**: 
  - **热门店铺排名**: 基于访问量的店铺热度排行
  - **热门商品排名**: 基于浏览量的产品热度排行
  - 实时数据更新，动态排名变化

- ⚡ **快速操作中心**: 
  - 一键跳转到店铺管理、订单处理
  - 直达终端管理、浏览分析、访问统计
  - 智能导航和功能快捷入口

**使用场景**:
- 管理员快速了解平台整体运营状况
- 识别热门店铺和商品，优化运营策略
- 数据驱动的业务决策支持

### 🏬 2. 店铺管理 (Boutiques)
**功能概述**: 实体店铺的全生命周期管理系统

#### **店铺列表管理**
- 📝 **信息展示**: 店铺图片、名称、地址、城市、评分、状态
- 🔍 **搜索筛选**: 按名称、地址搜索，状态筛选
- 📊 **排序功能**: 按评分、创建时间、排序权重排序
- ⚙️ **批量操作**: 批量状态更新、数据导出

#### **店铺详情编辑**
- 📋 **基本信息**: 
  - 店铺名称 (必填)
  - 详细地址
  - 省市选择 (级联选择器)
  - 店铺代码
  - 店铺类别
  - 联系方式
  - 过期时间
- ⭐ **评分管理**: 1-5星评分系统
- 🎯 **排序权重**: 影响店铺展示顺序
- 🖼️ **图片管理**: 
  - 主图上传 (1张)
  - 店铺图片轮播 (最多10张)
  - 支持图片格式：JPG、PNG、WebP
- 🏷️ **状态管理**: 已开放、已关闭

#### **智能省市选择**
- 🗺️ **级联选择**: 先选省份，再选城市
- 🔍 **搜索功能**: 支持省市名称模糊搜索
- 💾 **数据标准化**: 自动转换为"省份 城市"格式存储

###  3. 订单管理 (Orders)
**功能概述**: 订单的全流程跟踪和管理

#### **订单列表**
- 📋 **订单信息**: 订单ID、客户信息、店铺信息
- 💰 **金额展示**: 订单总价、支付状态
- 📅 **时间记录**: 创建时间、更新时间
- 🔄 **状态跟踪**: 待付款、已付款、已发货、已完成

#### **订单详情**
- 👤 **客户信息**: 姓名、联系方式、收货地址
- 🏪 **店铺信息**: 商家详细信息
- 📦 **商品清单**: 商品名称、数量、单价
- 💳 **支付信息**: 支付方式、支付时间、交易号
- 📋 **操作日志**: 订单状态变更历史

### 👥 4. 用户管理 (Users)
**功能概述**: 系统用户的创建、编辑和权限管理

#### **用户管理核心功能**
- 👤 **用户信息管理**: 姓名、邮箱、状态、角色设置
- 🔐 **权限控制**: 基于角色的访问控制系统
- 🆕 **新用户创建**: 
  - 默认密码 123456，明文显示便于管理
  - 创建成功后直接跳转用户列表
  - 邮箱作为登录用户名
- ✏️ **用户编辑**: 修改用户信息（邮箱不可编辑）
- 🔍 **高级筛选**: 按状态、角色、注册时间筛选
- 🛡️ **安全保护**: 防止删除管理员用户

#### **角色权限体系**
- **Administrator**: 超级管理员，拥有所有权限
- **Admin**: 普通管理员角色
- **用户状态**: 活跃、未激活、暂停、归档
- **权限验证**: 系统登录时严格验证管理员身份

### 👥 5. 客户管理 (Customers)  
**功能概述**: 客户信息和行为数据管理

#### **客户档案**
- 👤 **基本信息**: 昵称、头像、联系方式
- 🔑 **账户信息**: 客户ID、注册时间、活跃状态
- 📊 **行为统计**: 浏览记录、访问历史、偏好分析
- 📈 **数据洞察**: 客户活跃度和参与度分析

### 📺 6. 终端管理 (Terminals)
**功能概述**: 展示终端设备的管理和监控

#### **终端设备管理**
- 🖥️ **设备信息**: 终端ID、设备类型、位置信息
- 📊 **状态监控**: 在线状态、运行状态、设备健康度
- 🔧 **设备维护**: 设备配置、故障排查、性能监控
- 📋 **数据记录**: 设备使用记录、维护历史

### 👁️ 7. 浏览分析 (Views)
**功能概述**: 产品浏览行为的深度分析

#### **浏览数据分析**
- 👤 **用户行为**: 浏览用户、浏览时间、产品偏好  
- 📦 **产品热度**: 产品浏览量、热门产品排行
- 📊 **趋势分析**: 浏览趋势、用户兴趣变化
- 🎯 **智能洞察**: 用户偏好分析、产品推荐优化
- 📋 **详细记录**: 包含产品信息、分类、浏览时间

### 📊 8. 访问统计 (Visits)
**功能概述**: 店铺访问数据的统计和分析

#### **访问数据统计**  
- 📈 **访问概览**: 总访问次数、访问用户数、访问店铺数
- ⏰ **时间分析**: 今日访问、访问时间分布、高峰时段
- 🏪 **店铺分析**: 店铺访问排名、热门店铺统计
- 👥 **用户分析**: 用户访问行为、回访率、停留时长
- 📊 **数据洞察**: 访问趋势、店铺吸引力分析

---

## 操作指南

### 🏪 店铺管理操作流程

#### **新建店铺**
1. 点击左侧导航 "店铺管理"
2. 点击页面右上角 "新增店铺" 按钮
3. 填写店铺基本信息：
   ```
   - 店铺名称 (必填)
   - 详细地址
   - 所在城市 (省市级联选择)
   - 店铺代码 (可选)
   - 店铺类别 (可选)  
   - 联系方式 (可选)
   - 过期时间 (可选)
   ```
4. 设置店铺评分 (1-5星)
5. 设置排序权重 (影响显示顺序)
6. 上传店铺图片：
   - 主图：选择代表性图片 (1张)
   - 轮播图：上传店铺内景等 (最多10张)
7. 选择店铺状态 (已开放/已关闭)
8. 点击 "保存" 完成创建

#### **编辑店铺**
1. 在店铺列表中找到目标店铺
2. 点击 "编辑" 按钮
3. 修改需要更新的信息
4. 点击 "保存" 保存更改

#### **省市选择操作**
1. 在城市字段点击下拉箭头
2. 首先选择省份 (如: 江苏省)
3. 系统自动显示该省所有城市
4. 选择具体城市 (如: 南京市)
5. 系统自动保存为 "江苏省 南京市" 格式

#### **批量操作**
1. 使用搜索框筛选目标店铺
2. 勾选需要操作的店铺
3. 点击批量操作按钮
4. 选择操作类型 (批量更新状态/批量删除)
5. 确认操作

### 📦 商品管理操作流程

#### **新建商品**
1. 点击 "商品管理" 导航
2. 点击 "新增商品" 按钮
3. 填写商品基本信息：
   ```
   - 商品名称 (必填)
   - 商品副标题
   - 商品描述  
   - 销售价格 (必填)
   - 市场价格
   - 库存数量
   - 商品SKU/条码
   ```
4. 选择归属店铺
5. 选择商品分类
6. 上传商品图片
7. 设置商品状态
8. 点击 "保存" 完成创建

#### **商品状态管理**
- **草稿**: 未完成编辑的商品
- **上架**: 正常销售中的商品  
- **下架**: 暂停销售的商品
- **缺货**: 库存不足的商品

### 📋 订单处理流程

#### **订单查看**
1. 进入 "订单管理" 页面
2. 查看订单列表信息
3. 使用筛选条件查找订单：
   - 按订单状态筛选
   - 按时间范围筛选
   - 按客户信息搜索
4. 点击订单查看详细信息

#### **订单状态更新**
1. 打开订单详情页面
2. 根据实际情况更新订单状态：
   ```
   待付款 → 已付款 → 已发货 → 已完成
   ```
3. 填写状态更新备注
4. 保存更新

### 💾 数据导出操作
1. 在任意管理页面点击 "导出数据" 按钮
2. 系统自动生成 CSV 格式文件
3. 文件包含当前页面所有数据
4. 支持UTF-8编码，Excel直接打开无乱码

---

## 数据分析

### 📊 实时排名系统
Steamroller 提供强大的实时数据分析和排名功能：

#### **热门店铺排名**
- 基于访问量的店铺热度实时排名
- 显示店铺名称、地址、访问次数
- 支持最多显示前5名热门店铺
- 数据实时更新，反映最新访问趋势

#### **热门商品排名**
- 基于浏览量的商品热度实时排名
- 显示商品图片、名称、价格、分类信息
- 支持最多显示前5名热门商品
- 智能图片优化，96x96像素缩略图

#### **数据统计指标**
- **核心指标**: 订单数、店铺数、终端数、客户数
- **行为指标**: 产品浏览量、店铺访问量
- **时间维度**: 今日新增、历史累计、实时变化
- **增长趋势**: 数据增长趋势和变化幅度

### 🔍 行为分析功能

#### **浏览行为分析**
- 产品浏览记录的详细统计
- 用户浏览偏好和兴趣分析
- 产品热度排名和趋势变化
- 浏览时间分布和用户活跃度

#### **访问行为分析**
- 店铺访问数据的深度分析
- 访问用户数和访问频次统计
- 店铺吸引力和用户粘性分析
- 访问时间模式和高峰期识别

---

## 用户与权限管理

### 🔐 权限验证机制

#### **管理员角色验证**
- **支持的管理员角色**:
  - Administrator（管理员）
  - Admin（管理员）
  - Super Admin（超级管理员）
  - Super Administrator（超级管理员）
  - 中文角色：管理员、超级管理员、系统管理员

#### **权限检查流程**
1. **登录时验证**: 用户登录成功后立即检查角色
2. **持续验证**: 应用启动时验证已登录用户角色
3. **自动清理**: 非管理员用户自动清除认证信息
4. **友好提示**: 权限不足时显示明确错误消息

### 👥 用户管理功能

#### **新建用户流程**
1. 填写用户基本信息（姓名、邮箱必填）
2. 选择用户角色和状态
3. 系统自动设置默认密码：123456
4. 密码输入框明文显示，便于管理员记录
5. 保存成功后直接跳转到用户列表
6. 显示包含登录信息的成功提示

#### **用户编辑特性**
- 邮箱字段在编辑模式下不可修改
- 用户角色可以调整（需要相应权限）
- 用户状态管理：活跃、未激活、暂停、归档
- 安全保护：不能删除管理员用户

---

## 数据管理

### 📊 数据导出功能
系统支持各模块数据的CSV格式导出：

#### **店铺数据导出**
```
- 店铺ID
- 店铺名称  
- 店铺地址
- 所在城市
- 店铺代码
- 店铺类别
- 联系方式
- 过期时间
- 评分
- 状态
- 排序权重
- 创建时间
- 更新时间
- 创建者信息
```

#### **商品数据导出**
```
- 商品ID
- 商品名称
- 副标题
- 描述信息
- 销售价格
- 市场价格
- 库存数量
- SKU编码
- 所属店铺
- 商品分类
- 创建时间
- 更新时间
```

### 🔐 权限控制
系统基于用户权限进行数据访问控制：

#### **数据隔离**
- 普通用户只能查看和编辑自己创建的数据
- 管理员用户可以查看全部数据
- 基于 `user_created.id` 字段进行权限过滤

#### **操作权限**
- **查看权限**: 基础数据查看
- **编辑权限**: 数据修改和更新
- **删除权限**: 数据删除操作
- **导出权限**: 数据导出功能

### 🔄 数据同步
系统采用GraphQL实现实时数据同步：

- **实时更新**: 数据变更即时反映
- **缓存机制**: Apollo Client智能缓存
- **离线支持**: 网络异常时的数据保护
- **冲突处理**: 并发编辑的冲突解决

---

## 常见问题

### ❓ 登录问题

**Q: 忘记登录密码怎么办？**
A: 联系系统管理员重置密码，或使用密码重置功能。

**Q: 登录后页面空白？**  
A: 检查网络连接和浏览器兼容性，建议使用Chrome最新版本。

### ❓ 操作问题

**Q: 图片上传失败？**
A: 
- 检查图片格式是否为JPG/PNG/WebP
- 确认图片大小不超过10MB
- 检查网络连接是否稳定

**Q: 数据保存失败？**
A:
- 检查必填字段是否完整填写
- 确认网络连接正常
- 刷新页面后重试

**Q: 搜索功能不工作？**
A:
- 检查搜索关键词是否正确
- 尝试使用部分关键词搜索
- 清除搜索条件后重新搜索

### ❓ 数据问题

**Q: 导出的CSV文件乱码？**
A: 使用支持UTF-8编码的工具打开，或在Excel中选择UTF-8导入。

**Q: 省市选择器显示不全？**
A: 刷新页面重新加载省市数据，或联系技术支持。

### ❓ 性能问题

**Q: 页面加载缓慢？**
A:
- 检查网络连接速度
- 清除浏览器缓存
- 尝试在网络较好的环境下使用

**Q: 图片显示缓慢？**
A: 图片采用WebP格式和CDN加速，显示速度取决于网络条件。

---

## 技术支持

### 📞 联系方式
- **技术支持邮箱**: support@yourcompany.com
- **技术支持电话**: 400-XXX-XXXX
- **工作时间**: 周一至周五 9:00-18:00

### 🔧 系统要求

#### **浏览器兼容性**
- Chrome 90+ (推荐)
- Firefox 88+
- Safari 14+
- Edge 90+

#### **网络要求**
- 宽带网络连接
- 建议上传带宽 ≥ 2Mbps (图片上传)
- 建议下载带宽 ≥ 10Mbps (页面加载)

#### **分辨率要求**  
- 最小分辨率: 1366x768
- 推荐分辨率: 1920x1080

### 🛠️ 故障排除

#### **常见故障处理**
1. **页面无法加载**
   - 检查网络连接
   - 清除浏览器缓存和Cookie
   - 禁用浏览器扩展
   - 尝试无痕模式

2. **数据保存失败**
   - 检查表单验证错误
   - 确认网络连接稳定
   - 重新登录后重试

3. **图片上传失败**
   - 检查图片格式和大小
   - 确认上传权限
   - 尝试压缩图片后重试

### 📚 版本更新
系统采用持续集成和部署，定期发布功能更新：

- **功能更新**: 新增功能和模块
- **性能优化**: 页面加载和响应速度优化  
- **安全更新**: 安全漏洞修复和加固
- **用户体验**: 界面优化和交互改进

---

## 📈 系统特性总结

### ✨ 核心优势
- **🎨 现代化界面**: 基于Ant Design 5.27.1的精美界面设计
- **⚡ 高性能**: Next.js 15.5.0 + GraphQL实现极速响应
- **🔐 安全可靠**: 严格的管理员角色验证和JWT认证
- **📱 响应式设计**: 完美适配桌面端和移动端
- **🌏 本地化支持**: 完整的中文界面和交互体验
- **� 智能分析**: 实时排名系统和数据洞察

### 🚀 技术亮点
- **TypeScript**: 全面的类型安全开发体验
- **GraphQL**: 高效的数据查询和实时更新
- **Apollo Client**: 智能缓存和状态管理
- **图片优化**: WebP格式 + 动态尺寸调整
- **权限控制**: 基于角色的精准权限管理
- **实时排名**: 智能的热门店铺和商品排行
- **数据分析**: 深度的用户行为和访问统计

### 🛡️ 安全特性
- **管理员专用**: 只有管理员角色才能访问系统
- **多重验证**: 登录时和会话期间持续验证权限
- **自动保护**: 非管理员用户自动清除认证信息
- **安全删除**: 防止删除重要管理员账户
- **密码管理**: 新用户默认密码和安全提示

---

*本手册基于实际项目功能编写，持续更新维护。如有疑问请联系技术支持团队。*

**版本**: v2.0.0  
**项目代号**: Steamroller  
**最后更新**: 2025年10月4日  
**适用版本**: Next.js 15.5.0 + Ant Design 5.27.1